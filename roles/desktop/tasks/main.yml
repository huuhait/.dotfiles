---
- name: Set zsh as default shell
  user:
    name: huuhait
    shell: /bin/zsh
  become_user: "root"

- name: Install Oh My Zsh
  shell: sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
  ignore_errors: true 

- name: Fetch zap-zsh
  ansible.builtin.uri:
    url: https://raw.githubusercontent.com/zap-zsh/zap/master/install.zsh
    return_content: true
  register: zap_installer

- name: Run zap-zsh installer
  ansible.builtin.shell:
    cmd: zsh -s
    stdin: "{{ zap_installer.content }}"

- name: Install themes
  include_tasks: themes.yml

- name: Install dotfiles
  include_tasks: dotfiles.yml

- name: Create screenshot folder
  ansible.builtin.file:
    path: ~/Pictures/Screenshots
    state: directory